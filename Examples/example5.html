<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>JQen If Example</title>
</head>

<body>
    <div id="container"></div>
    <script src="JQen.js" defer></script>
    <script>
        const template = `
<if case="{var:0} == 0">
<div>Zero!</div>
</if>

<if case="{var:1} == 0">
Zero!
<else />
<div>Not {var:0} but {var:1}.</div>
</if>

<if case="{var:2} == 0">
Zero!
<elseif case="{var:2} == 2" />
<div>Two!</div>
<else />
Not zero or one.
</if>

<if case="{var:2} == 0">
Zero!
<elseif case="{var:2} == 5" />
Two!
<elseif case="{var:3} == 3" />
<div>{var:3}</div>
<else />
Not zero or one or two.
</if>`;

        const data = "[0,1,2,3]";

        const JQenRender = (() => {
            let instance = null;

            return async (template, data, name = "") => {
                if (!instance) {
                    instance = JQenModule().then((Module) => {
                        Module.Render = Module.cwrap("JQen_Render", "string", ["string", "string", "string"]);
                        return Module;
                    });
                }

                return (await instance).Render(template, data, name);
            };
        })();

        document.addEventListener("DOMContentLoaded", async () => {
            document.getElementById("container").innerHTML = await JQenRender(template, data, "If Example");
        });
    </script>
</body>

</html>
