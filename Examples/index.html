<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="main.css" />
    <title>JQen WASM Example 1</title>
</head>

<body>
    <div id="maindiv" class="main">
        <fieldset>
            <legend>Template:</legend>
            <textarea id="template_txt" cols="50" rows="10"></textarea>
        </fieldset>

        <fieldset>
            <legend>JSON:</legend>
            <textarea id="json_txt" cols="50" rows="10"></textarea>
        </fieldset>

        <br>

        <fieldset>
            <legend>Result:</legend>
            <textarea id="rendered_txt" cols="50" rows="10"></textarea>
        </fieldset>

        <br>
        <br>

        <button id="render">Render Template</button>
    </div>

    <script src="JQen.js"></script>
    <script type='text/javascript'>
        "use strict";
        window.onload = function () {
            var rt = document.getElementById("rendered_txt"),
                tt = document.getElementById("template_txt"),
                jt = document.getElementById("json_txt");

            tt.value = `<loop set="major" key="_m_">
    <h3>Major: _m_</h3>
    <ul>
    <loop set="major[_m_]" value="student_val">
        <li>
            <span>Name: student_val[Name]</span>
            <span>
                GPA: student_val[GPA]
                <if case="student_val[GPA] < 2.5"> (Inform adviser!)
                <elseif case="student_val[GPA] >= 3.5" /> (President's List!)
                <elseif case="student_val[GPA] >= 3.0" /> (Dean's List!)
                </if>
            </span>
        </li>
    </loop>
    </ul>
</loop>
                    `;
            jt.value = `{
    "major": {
        "Computer Science": [
            {
                "Name": "Oliver",
                "GPA": "3.2"
            },
            {
                "Name": "Jonah",
                "GPA": "3.8"
            },
            {
                "Name": "Ava",
                "GPA": "2.8"
            }
        ],
        "Math": [
            {
                "Name": "Maxim",
                "GPA": "3.0"
            },
            {
                "Name": "Cole",
                "GPA": "2.5"
            },
            {
                "Name": "Claire",
                "GPA": "2.4"
            }
        ]
    }
}`;
            document.getElementById("render").addEventListener('click', function () {
                rt.value = Module.JQen_Render(tt.value, jt.value);
            });
        };
    </script>
</body>

</html>
